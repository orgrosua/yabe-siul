<script src="https://cdn.tailwindcss.com" id="siul-tailwindcss-jit"></script>

<script type="module" id="siul-tailwindcss-play-cdn">
    import { parse as parsePackage } from 'https://esm.sh/parse-package-name';
    import { set } from 'https://esm.sh/lodash-es';
    import fs from 'fs';
    
    // intercept fs read, and if the path is contains `css/preflight.css`, return the preflight.css content
    let preflightCss = null;
    fs.readFileSync = function (path, encoding) {
        // create browser virtual file ./css/preflight.css
        if (path.includes('css/preflight.css')) {
            if (preflightCss === null) {
                const preflight = new XMLHttpRequest();
                preflight.open('GET', `https://esm.sh/tailwindcss/src/css/preflight.css?raw`, false);
                preflight.send(null);
                preflightCss = preflight.responseText;
            }
            return preflightCss;
        }
        return fs.readFileSync
    }

    let importShim;
    try {
        await (0, eval)('import("")');
    } catch (error) {
        if (error instanceof TypeError) {
            importShim = (0, eval)('u=>import(u)');
        } else {
            var s = document.createElement('script');
            s.src = 'https://esm.sh/shimport/index.js?raw';
            document.head.appendChild(s);
            importShim = __shimport__.load;
        }
    }

    const require = async (m) => {
        let result;
        try {
            const _m = parsePackage(m);
            const href = 'https://esm.sh/' + _m.name + '@' + _m.version + _m.path;
            result = await importShim(href);
        } catch (error) {
            console.log(`Cannot find module '${m}'`);
        }
        return result.default || result;
    };

    //-@-tailwindcss

    while (!window.tailwind) {
        await new Promise((resolve) => setTimeout(resolve, 100));
    }

    tailwind.config = siul;

    const oldStyleEl = document.getElementById('siul-tailwindcss-main-css');
    const newStyleEl = document.createElement('style');
    newStyleEl.type = 'text/tailwindcss';
    newStyleEl.textContent = oldStyleEl.textContent;
    oldStyleEl.replaceWith(newStyleEl);

    set(window, 'siul.loaded.siul', true);
</script>

<style type="text/siul-tailwindcss-main-css" id="siul-tailwindcss-main-css"></style>